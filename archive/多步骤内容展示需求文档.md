# 多步骤内容展示需求文档

## 1. 需求概述

### 1.1 当前问题
- 现在所有Tab（脑洞、大纲、小说、剧本）都显示相同的脑洞卡片
- 缺少其他步骤的内容展示样式
- 用户无法预览各个阶段的实际效果

### 1.2 目标
为每个创作步骤设计独特的展示界面，使用模拟数据展示各阶段的内容形态。

## 2. 各步骤展示设计

### 2.1 脑洞（Ideas）- 现有设计保持
瀑布流卡片展示，已完成。

### 2.2 大纲（Outline）展示

#### 设计样式
```html
<!-- 大纲展示容器 -->
<div class="outline-container">
    <!-- 大纲标题区 -->
    <div class="outline-header">
        <div class="outline-meta">
            <span class="outline-badge">科幻悬疑</span>
            <span class="outline-source">基于：时间旅行者的悖论</span>
        </div>
        <h2 class="outline-title">《循环·破局》</h2>
        <p class="outline-summary">
            一个关于时间、命运和选择的故事。当改变过去成为可能，
            我们是否有勇气面对未知的未来？
        </p>
    </div>
    
    <!-- 四部分结构 -->
    <div class="outline-parts">
        <!-- 起 -->
        <div class="part-card part-1">
            <div class="part-header">
                <span class="part-number">01</span>
                <h3 class="part-title">起 · 发现</h3>
                <span class="part-progress">25%</span>
            </div>
            <div class="part-content">
                <p>2157年，时间物理学家陈末在一次实验事故中...</p>
                <ul class="part-points">
                    <li>介绍未来世界背景</li>
                    <li>主角意外进入时间循环</li>
                    <li>发现每天都在重复</li>
                </ul>
            </div>
        </div>
        
        <!-- 承 -->
        <div class="part-card part-2">
            <div class="part-header">
                <span class="part-number">02</span>
                <h3 class="part-title">承 · 探索</h3>
                <span class="part-progress">25%</span>
            </div>
            <div class="part-content">
                <p>陈末开始尝试改变，但每次改变都导致更糟糕的结果...</p>
                <ul class="part-points">
                    <li>第一次尝试：救下同事</li>
                    <li>第二次尝试：阻止实验</li>
                    <li>第三次尝试：改变关键决定</li>
                </ul>
            </div>
        </div>
        
        <!-- 转 -->
        <div class="part-card part-3">
            <div class="part-header">
                <span class="part-number">03</span>
                <h3 class="part-title">转 · 真相</h3>
                <span class="part-progress">25%</span>
            </div>
            <div class="part-content">
                <p>陈末发现循环的真正原因，以及打破它的唯一方法...</p>
                <ul class="part-points">
                    <li>发现循环是保护机制</li>
                    <li>理解时间悖论的本质</li>
                    <li>找到关键的选择点</li>
                </ul>
            </div>
        </div>
        
        <!-- 合 -->
        <div class="part-card part-4">
            <div class="part-header">
                <span class="part-number">04</span>
                <h3 class="part-title">合 · 抉择</h3>
                <span class="part-progress">25%</span>
            </div>
            <div class="part-content">
                <p>面对打破循环的代价，陈末做出了最终的选择...</p>
                <ul class="part-points">
                    <li>接受无法改变的事实</li>
                    <li>选择牺牲与救赎</li>
                    <li>新的时间线开启</li>
                </ul>
            </div>
        </div>
    </div>
    
    <!-- 角色设定 -->
    <div class="outline-characters">
        <h3>主要角色</h3>
        <div class="character-list">
            <div class="character-card">
                <div class="character-avatar">陈</div>
                <div class="character-info">
                    <h4>陈末</h4>
                    <p>时间物理学家，理性但孤独</p>
                </div>
            </div>
            <div class="character-card">
                <div class="character-avatar">林</div>
                <div class="character-info">
                    <h4>林若素</h4>
                    <p>助手，循环中唯一的变量</p>
                </div>
            </div>
        </div>
    </div>
</div>
```

### 2.3 小说（Novel）展示

#### 设计样式
```html
<!-- 小说阅读器 -->
<div class="novel-reader">
    <!-- 顶部信息栏 -->
    <div class="novel-header">
        <h1 class="novel-title">时间旅行者的悖论</h1>
        <div class="novel-stats">
            <span><i class="fas fa-book-open"></i> 15,234 字</span>
            <span><i class="fas fa-clock"></i> 预计阅读 18 分钟</span>
            <span><i class="fas fa-bookmark"></i> 4 章节</span>
        </div>
    </div>
    
    <!-- 章节导航 -->
    <div class="chapter-nav">
        <button class="chapter-btn active">第一章：循环初现</button>
        <button class="chapter-btn">第二章：无尽尝试</button>
        <button class="chapter-btn">第三章：真相浮现</button>
        <button class="chapter-btn">第四章：最终抉择</button>
    </div>
    
    <!-- 正文内容 -->
    <div class="novel-content">
        <h2 class="chapter-title">第一章：循环初现</h2>
        
        <p class="novel-paragraph first-paragraph">
            　　2157年3月15日，凌晨3点14分。
        </p>
        
        <p class="novel-paragraph">
            　　陈末第一千零一次从同样的噩梦中惊醒。冷汗浸透了他的衬衫，
            实验室的应急灯在黑暗中闪烁着幽绿色的光芒。他看了一眼墙上的
            全息时钟——又是3点14分，精确到秒。
        </p>
        
        <p class="novel-paragraph">
            　　"该死。"他低声咒骂，声音在空旷的实验室里回荡。
        </p>
        
        <p class="novel-paragraph">
            　　这已经是第几次了？他记不清了。每一天都在重复，每一个细节
            都分毫不差。咖啡机会在3点17分发出故障警报，林若素会在3点23分
            推门进来，带着她那句永远不变的问候："陈教授，您又通宵了？"
        </p>
        
        <p class="novel-paragraph">
            　　但这一次，陈末决定做些不同的事。
        </p>
        
        <p class="novel-paragraph dialog">
            　　"如果我不在这里呢？"他自言自语，"如果我离开实验室，
            循环会被打破吗？"
        </p>
        
        <!-- 更多段落... -->
    </div>
    
    <!-- 阅读工具栏 -->
    <div class="reading-toolbar">
        <button class="tool-btn"><i class="fas fa-font"></i> 字体</button>
        <button class="tool-btn"><i class="fas fa-palette"></i> 主题</button>
        <button class="tool-btn"><i class="fas fa-bookmark"></i> 书签</button>
        <button class="tool-btn"><i class="fas fa-download"></i> 下载</button>
    </div>
</div>
```

### 2.4 剧本（Script）展示

#### 设计样式
```html
<!-- 剧本格式展示 -->
<div class="script-container">
    <!-- 剧本封面 -->
    <div class="script-cover">
        <div class="script-meta">
            <span>科幻悬疑剧本</span>
            <span>120分钟</span>
            <span>12场</span>
        </div>
        <h1 class="script-title">《循环》</h1>
        <p class="script-logline">
            一句话梗概：一个被困在时间循环中的科学家，
            必须在失去所爱之人和拯救世界之间做出选择。
        </p>
    </div>
    
    <!-- 剧本正文 -->
    <div class="script-content">
        <!-- 场景标题 -->
        <div class="scene-heading">
            <span class="scene-number">场景 1</span>
            <h3>内景 - 量子物理实验室 - 凌晨</h3>
        </div>
        
        <!-- 场景描述 -->
        <div class="action-line">
            昏暗的实验室里，各种仪器闪烁着指示灯。墙上的全息时钟显示3:14。
        </div>
        
        <div class="action-line">
            陈末（35岁，疲惫但眼神坚定）突然从椅子上惊醒，额头布满汗珠。
        </div>
        
        <!-- 对话 -->
        <div class="dialogue-block">
            <p class="character-name">陈末</p>
            <p class="parenthetical">（喃喃自语）</p>
            <p class="dialogue">又是3点14分...</p>
        </div>
        
        <div class="action-line">
            他站起身，走向窗边。城市的霓虹灯在雨中模糊成一片。
        </div>
        
        <!-- 音效提示 -->
        <div class="sound-cue">
            【音效：咖啡机故障警报声】
        </div>
        
        <div class="dialogue-block">
            <p class="character-name">陈末</p>
            <p class="dialogue">三、二、一...</p>
        </div>
        
        <div class="action-line">
            实验室的门被推开。林若素（28岁，助手）走进来。
        </div>
        
        <div class="dialogue-block">
            <p class="character-name">林若素</p>
            <p class="parenthetical">（关切地）</p>
            <p class="dialogue">陈教授，您又通宵了？</p>
        </div>
        
        <div class="dialogue-block">
            <p class="character-name">陈末</p>
            <p class="parenthetical">（苦笑）</p>
            <p class="dialogue">若素，如果我告诉你，这句话你已经说了一千次，你信吗？</p>
        </div>
        
        <!-- 转场 -->
        <div class="transition">切至：</div>
        
        <!-- 下一场景 -->
        <div class="scene-heading">
            <span class="scene-number">场景 2</span>
            <h3>内景 - 实验室休息区 - 稍后</h3>
        </div>
    </div>
    
    <!-- 剧本工具栏 -->
    <div class="script-toolbar">
        <button class="tool-btn"><i class="fas fa-list"></i> 场景列表</button>
        <button class="tool-btn"><i class="fas fa-users"></i> 角色表</button>
        <button class="tool-btn"><i class="fas fa-file-export"></i> 导出</button>
    </div>
</div>
```

## 3. 模拟数据规范

### 3.1 脑洞数据（已有）
```javascript
const ideasMockData = [
    {
        id: "b1-1",
        badge: "科幻",
        title: "时间旅行者的悖论",
        content: "在2157年，时间旅行已经成为现实。主人公发现自己陷入了一个时间循环..."
    },
    {
        id: "b1-2",
        badge: "悬疑",
        title: "消失的第七个房间",
        content: "一座古老的旅馆，六个房间，七个客人..."
    },
    // ... 更多
];
```

### 3.2 大纲数据
```javascript
const outlineMockData = {
    meta: {
        genre: "科幻悬疑",
        baseIdea: "时间旅行者的悖论",
        title: "《循环·破局》",
        summary: "一个关于时间、命运和选择的故事。当改变过去成为可能，我们是否有勇气面对未知的未来？",
        estimatedWords: 15000,
        chapters: 4
    },
    
    structure: {
        part1: {
            title: "起 · 发现",
            content: "2157年，时间物理学家陈末在一次实验事故中，意外进入了一个24小时的时间循环。每天凌晨3点14分，他都会回到同一个起点。",
            keyPoints: [
                "介绍未来世界背景",
                "主角意外进入时间循环",
                "发现每天都在重复",
                "初步尝试打破循环失败"
            ],
            percentage: 25
        },
        
        part2: {
            title: "承 · 探索",
            content: "陈末开始系统地尝试各种方法来打破循环，但每一次改变都会导致更糟糕的结果。他逐渐意识到，这个循环可能不是意外。",
            keyPoints: [
                "第一次尝试：救下实验事故中死去的同事",
                "第二次尝试：阻止实验的进行",
                "第三次尝试：改变关键的决定",
                "发现改变会产生蝴蝶效应"
            ],
            percentage: 25
        },
        
        part3: {
            title: "转 · 真相",
            content: "通过助手林若素留下的线索，陈末发现时间循环是一个保护机制，是为了防止一个更大的灾难。而打破它的方法，需要极大的牺牲。",
            keyPoints: [
                "发现循环是量子计算机的保护机制",
                "理解时间悖论的本质",
                "找到关键的选择点",
                "面临道德困境"
            ],
            percentage: 25
        },
        
        part4: {
            title: "合 · 抉择",
            content: "面对打破循环的代价——失去林若素，陈末必须在个人情感和拯救世界之间做出选择。最终，他选择了牺牲，开启了新的时间线。",
            keyPoints: [
                "接受无法改变的事实",
                "选择牺牲与救赎",
                "循环被打破",
                "新的时间线开启"
            ],
            percentage: 25
        }
    },
    
    characters: [
        {
            name: "陈末",
            role: "主角",
            age: 35,
            description: "量子物理学家，理性但内心孤独，被困在时间循环中寻找出路"
        },
        {
            name: "林若素",
            role: "关键人物",
            age: 28,
            description: "陈末的助手，循环中唯一的变量，掌握着打破循环的关键"
        },
        {
            name: "老威尔逊",
            role: "导师",
            age: 67,
            description: "实验室主任，知道循环的真相但无法直接告诉陈末"
        }
    ],
    
    timeline: "2157年3月15日（循环日）",
    location: "新上海量子物理研究所",
    theme: "时间、命运、选择、牺牲"
};
```

### 3.3 小说数据
```javascript
const novelMockData = {
    meta: {
        title: "时间旅行者的悖论",
        author: "AI创作助手",
        words: 15234,
        readingTime: 18, // 分钟
        chapters: 4,
        genre: "科幻悬疑",
        createdAt: "2024-01-20"
    },
    
    chapters: [
        {
            number: 1,
            title: "循环初现",
            words: 3821,
            content: [
                {
                    type: "paragraph",
                    text: "2157年3月15日，凌晨3点14分。",
                    style: "first"
                },
                {
                    type: "paragraph",
                    text: "陈末第一千零一次从同样的噩梦中惊醒。冷汗浸透了他的衬衫，实验室的应急灯在黑暗中闪烁着幽绿色的光芒。他看了一眼墙上的全息时钟——又是3点14分，精确到秒。"
                },
                {
                    type: "dialogue",
                    character: "陈末",
                    text: "该死。",
                    action: "他低声咒骂，声音在空旷的实验室里回荡。"
                },
                {
                    type: "paragraph",
                    text: "这已经是第几次了？他记不清了。每一天都在重复，每一个细节都分毫不差。咖啡机会在3点17分发出故障警报，林若素会在3点23分推门进来，带着她那句永远不变的问候。"
                },
                {
                    type: "paragraph",
                    text: "但这一次，陈末决定做些不同的事。"
                },
                // ... 更多内容
            ]
        },
        {
            number: 2,
            title: "无尽尝试",
            words: 4102,
            content: [
                // ... 第二章内容
            ]
        },
        // ... 更多章节
    ],
    
    settings: {
        fontSize: 16,
        lineHeight: 1.8,
        theme: "light",
        fontFamily: "serif"
    }
};
```

### 3.4 剧本数据
```javascript
const scriptMockData = {
    meta: {
        title: "《循环》",
        format: "电影剧本",
        genre: "科幻悬疑",
        duration: 120, // 分钟
        scenes: 12,
        logline: "一个被困在时间循环中的科学家，必须在失去所爱之人和拯救世界之间做出选择。",
        characters: 5
    },
    
    scenes: [
        {
            number: 1,
            type: "INT", // 内景
            location: "量子物理实验室",
            time: "凌晨",
            description: "昏暗的实验室里，各种仪器闪烁着指示灯。墙上的全息时钟显示3:14。",
            
            content: [
                {
                    type: "action",
                    text: "陈末（35岁，疲惫但眼神坚定）突然从椅子上惊醒，额头布满汗珠。"
                },
                {
                    type: "dialogue",
                    character: "陈末",
                    parenthetical: "喃喃自语",
                    text: "又是3点14分..."
                },
                {
                    type: "action",
                    text: "他站起身，走向窗边。城市的霓虹灯在雨中模糊成一片。"
                },
                {
                    type: "sound",
                    text: "咖啡机故障警报声"
                },
                {
                    type: "dialogue",
                    character: "陈末",
                    text: "三、二、一..."
                },
                {
                    type: "action",
                    text: "实验室的门被推开。林若素（28岁，助手）走进来。"
                },
                {
                    type: "dialogue",
                    character: "林若素",
                    parenthetical: "关切地",
                    text: "陈教授，您又通宵了？"
                },
                {
                    type: "dialogue",
                    character: "陈末",
                    parenthetical: "苦笑",
                    text: "若素，如果我告诉你，这句话你已经说了一千次，你信吗？"
                },
                {
                    type: "transition",
                    text: "切至："
                }
            ]
        },
        {
            number: 2,
            type: "INT",
            location: "实验室休息区",
            time: "稍后",
            content: [
                // ... 场景2内容
            ]
        },
        // ... 更多场景
    ],
    
    characters: [
        {
            name: "陈末",
            description: "35岁，量子物理学家，被困在时间循环中"
        },
        {
            name: "林若素",
            description: "28岁，陈末的助手，循环的关键"
        },
        // ... 更多角色
    ]
};
```

## 4. 切换逻辑

### 4.1 Tab切换处理
```javascript
// 进度步骤点击事件
function handleStepClick(step) {
    // 清空当前显示区
    const displayArea = document.querySelector('.display-area');
    displayArea.innerHTML = '';
    
    switch(step) {
        case '脑洞':
            renderIdeasView(ideasMockData);
            break;
            
        case '大纲':
            renderOutlineView(outlineMockData);
            break;
            
        case '小说':
            renderNovelView(novelMockData);
            break;
            
        case '剧本':
            renderScriptView(scriptMockData);
            break;
    }
    
    // 更新进度条
    updateProgressBar(step);
    
    // 更新聊天区提示
    updateChatContext(step);
}
```

### 4.2 渲染函数示例
```javascript
// 渲染大纲视图
function renderOutlineView(data) {
    const container = document.querySelector('.display-area');
    
    const outlineHTML = `
        <div class="outline-container">
            <div class="outline-header">
                <div class="outline-meta">
                    <span class="outline-badge">${data.meta.genre}</span>
                    <span class="outline-source">基于：${data.meta.baseIdea}</span>
                </div>
                <h2 class="outline-title">${data.meta.title}</h2>
                <p class="outline-summary">${data.meta.summary}</p>
            </div>
            
            <div class="outline-parts">
                ${Object.values(data.structure).map((part, index) => `
                    <div class="part-card part-${index + 1}">
                        <div class="part-header">
                            <span class="part-number">0${index + 1}</span>
                            <h3 class="part-title">${part.title}</h3>
                            <span class="part-progress">${part.percentage}%</span>
                        </div>
                        <div class="part-content">
                            <p>${part.content}</p>
                            <ul class="part-points">
                                ${part.keyPoints.map(point => `<li>${point}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                `).join('')}
            </div>
            
            <div class="outline-characters">
                <h3>主要角色</h3>
                <div class="character-list">
                    ${data.characters.map(char => `
                        <div class="character-card">
                            <div class="character-avatar">${char.name[0]}</div>
                            <div class="character-info">
                                <h4>${char.name}</h4>
                                <p>${char.description}</p>
                            </div>
                        </div>
                    `).join('')}
                </div>
            </div>
        </div>
    `;
    
    container.innerHTML = outlineHTML;
}
```

## 5. 样式规范

### 5.1 大纲样式
```css
.outline-container {
    padding: 2rem;
    max-width: 1200px;
    margin: 0 auto;
}

.outline-parts {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1.5rem;
    margin-top: 2rem;
}

.part-card {
    background: var(--dark-card);
    border-radius: 12px;
    padding: 1.5rem;
    border-left: 4px solid var(--primary-color);
}

.part-card.part-1 { border-left-color: #667eea; }
.part-card.part-2 { border-left-color: #4F46E5; }
.part-card.part-3 { border-left-color: #10B981; }
.part-card.part-4 { border-left-color: #F59E0B; }
```

### 5.2 小说样式
```css
.novel-reader {
    max-width: 800px;
    margin: 0 auto;
    padding: 2rem;
    background: rgba(255, 255, 255, 0.02);
    border-radius: 12px;
}

.novel-content {
    font-size: 18px;
    line-height: 1.8;
    color: #e6edf3;
}

.novel-paragraph {
    margin-bottom: 1.5rem;
    text-indent: 2em;
}

.novel-paragraph.first-paragraph {
    text-indent: 0;
    font-weight: 500;
}

.dialogue-block {
    margin: 1.5rem 0;
    padding-left: 2rem;
}
```

### 5.3 剧本样式
```css
.script-container {
    max-width: 700px;
    margin: 0 auto;
    font-family: 'Courier New', monospace;
    background: #1a1a1a;
    padding: 3rem;
    border-radius: 8px;
}

.scene-heading {
    margin: 2rem 0 1rem;
    text-transform: uppercase;
}

.action-line {
    margin: 1rem 0;
    line-height: 1.6;
}

.dialogue-block {
    margin: 1rem auto;
    max-width: 400px;
}

.character-name {
    text-align: center;
    text-transform: uppercase;
    margin-bottom: 0.25rem;
}

.parenthetical {
    text-align: center;
    font-style: italic;
    opacity: 0.8;
}

.dialogue {
    margin-top: 0.25rem;
}
```

## 6. 交互增强

### 6.1 大纲交互
- 点击每个部分展开详细内容
- 可以编辑要点
- 拖拽调整顺序

### 6.2 小说交互
- 字体大小调节
- 主题切换（暗/亮）
- 书签功能
- 进度保存

### 6.3 剧本交互
- 场景跳转
- 角色高亮
- 导出PDF格式
- 朗读模式

## 7. 实施计划

### Phase 1：基础展示（1天）
- [ ] 创建大纲展示组件
- [ ] 创建小说展示组件
- [ ] 创建剧本展示组件

### Phase 2：数据对接（1天）
- [ ] 准备完整模拟数据
- [ ] 实现Tab切换逻辑
- [ ] 渲染函数开发

### Phase 3：样式美化（1天）
- [ ] 大纲卡片样式
- [ ] 小说阅读器样式
- [ ] 剧本格式样式

### Phase 4：交互完善（1天）
- [ ] 添加动画效果
- [ ] 响应式适配
- [ ] 功能按钮实现

## 8. 注意事项

1. **保持风格统一**：所有界面都使用暗色主题 + 紫色渐变
2. **性能优化**：大量文本使用虚拟滚动
3. **数据结构**：保持可扩展性，便于后续对接真实API
4. **用户体验**：每个步骤都要有清晰的视觉区分

---

**文档版本**：1.0.0  
**更新时间**：2024-01-20  
**作者**：AI助手