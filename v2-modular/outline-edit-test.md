# 起承转合编辑功能测试说明

## 新增功能
起承转合部分现在支持内联编辑，与脑洞卡片的编辑功能保持一致。

## 编辑功能特性

### 1. 标题编辑
- 每个部分（起、承、转、合）的标题都可编辑
- 鼠标悬停显示编辑图标
- 点击编辑图标进入编辑模式
- 支持 Enter 保存，Esc 取消

### 2. 内容编辑
- 每个部分的内容文本可编辑
- 鼠标悬停在内容区域显示编辑图标
- 点击编辑图标显示文本框
- 支持 Esc 取消编辑

### 3. 视觉反馈
- 编辑图标默认隐藏，悬停显示
- 编辑时显示蓝色边框
- 保存/取消按钮采用绿色/红色设计
- 保存成功显示提示

## 测试步骤

1. **生成大纲**
   - 选择模式 → 生成脑洞 → 选择脑洞
   - 点击"生成大纲"等待完成

2. **测试标题编辑**
   - 鼠标悬停在"起：开篇"等标题上
   - 点击出现的编辑图标
   - 修改标题文本
   - 按 Enter 保存或点击✓按钮

3. **测试内容编辑**
   - 鼠标悬停在任意部分的内容文本上
   - 点击右上角的编辑图标
   - 在文本框中修改内容
   - 点击✓保存或✗取消

4. **测试持久化**
   - 编辑后切换到其他标签页
   - 返回大纲页面
   - 验证编辑内容是否保留

## 技术实现

### 文件修改
- `outline-handler.js` - 添加 `enableOutlineEdit` 函数
- `styles-v2.css` - 添加大纲编辑样式
- 支持 localStorage 持久化

### 主要函数
- `enableOutlineEdit(sectionId, type)` - 启用编辑模式
- `createEditControls()` - 创建编辑控制按钮
- `saveOutlineToStorage()` - 保存到 localStorage

## 用户体验优化
- 编辑图标只在需要时显示，不干扰阅读
- 快捷键支持提高编辑效率
- 实时保存，不会丢失修改
- 视觉反馈清晰，操作直观