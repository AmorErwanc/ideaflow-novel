<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI小说创作平台 - 横向进程式布局V2</title>
    <script src="https://cdn.tailwindcss.com/3.3.3"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
    <style>
        /* 进度条样式 */
        .progress-line {
            height: 4px;
            background: #e5e7eb;
            position: relative;
            transition: all 0.5s ease;
        }
        
        .progress-line.active {
            background: linear-gradient(90deg, #10b981 0%, #059669 100%);
        }
        
        .progress-line.completed {
            background: #10b981;
        }
        
        /* 步骤节点样式 */
        .step-node {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: white;
            border: 3px solid #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            transition: all 0.3s ease;
            z-index: 10;
        }
        
        .step-node.active {
            border-color: #10b981;
            transform: scale(1.1);
            box-shadow: 0 0 0 8px rgba(16, 185, 129, 0.1);
        }
        
        .step-node.completed {
            background: #10b981;
            border-color: #10b981;
        }
        
        .step-node.completed .step-icon {
            color: white;
        }
        
        /* 脉冲动画 */
        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.4);
            }
            70% {
                box-shadow: 0 0 0 20px rgba(16, 185, 129, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(16, 185, 129, 0);
            }
        }
        
        .step-node.active {
            animation: pulse 2s infinite;
        }
        
        /* 内容区域切换动画 */
        .content-panel {
            display: none;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.3s ease;
        }
        
        .content-panel.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }
        
        /* 模式选择卡片 */
        .mode-card {
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            position: relative;
            overflow: hidden;
        }
        
        .mode-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(16, 185, 129, 0.1), transparent);
            transition: left 0.5s ease;
        }
        
        .mode-card:hover::before {
            left: 100%;
        }
        
        .mode-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }
        
        .mode-card.selected {
            border-color: #10b981;
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
        }
        
        /* 卡片选择效果 */
        .idea-card {
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .idea-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        .idea-card.selected {
            border-color: #10b981;
            background: #f0fdf4;
        }
        
        /* 加载动画 */
        .loading-dots {
            display: inline-flex;
            gap: 4px;
        }
        
        .loading-dots span {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #10b981;
            animation: loading-bounce 1.4s ease-in-out infinite;
        }
        
        .loading-dots span:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .loading-dots span:nth-child(3) {
            animation-delay: 0.4s;
        }
        
        @keyframes loading-bounce {
            0%, 80%, 100% {
                transform: scale(0.8);
                opacity: 0.5;
            }
            40% {
                transform: scale(1.2);
                opacity: 1;
            }
        }
        
        /* 标签样式 */
        .tag {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
            transition: all 0.2s ease;
        }
        
        .tag:hover {
            transform: scale(1.05);
        }
        
        /* 加载进度条动画 */
        .loading-progress {
            animation: progress-fill 3s ease-out forwards;
        }
        
        @keyframes progress-fill {
            0% { width: 0%; }
            30% { width: 30%; }
            60% { width: 65%; }
            90% { width: 90%; }
            100% { width: 100%; }
        }
        
        /* 响应式调整 */
        @media (max-width: 768px) {
            .step-container {
                overflow-x: auto;
                padding-bottom: 1rem;
            }
            
            .step-wrapper {
                min-width: 700px;
            }
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-gray-50 to-gray-100">
    <!-- 导航栏 -->
    <nav class="bg-white shadow-lg py-4 px-6 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto flex items-center justify-between">
            <div class="flex items-center">
                <i class="fas fa-rocket text-2xl text-green-600 mr-3"></i>
                <span class="text-xl font-bold bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent">
                    AI小说创作平台 - 智能创作流
                </span>
            </div>
            <div class="flex items-center gap-4">
                <button class="text-gray-600 hover:text-gray-800 transition-colors">
                    <i class="fas fa-save mr-2"></i>保存进度
                </button>
                <button class="text-gray-600 hover:text-gray-800 transition-colors">
                    <i class="fas fa-history mr-2"></i>历史记录
                </button>
            </div>
        </div>
    </nav>

    <!-- 主内容区 -->
    <main class="max-w-7xl mx-auto py-8 px-4">
        <!-- 进度指示器 -->
        <div class="bg-white rounded-xl shadow-xl p-6 mb-8">
            <div class="mb-4">
                <div class="flex justify-between items-center mb-2">
                    <h2 class="text-lg font-semibold text-gray-700">创作流程</h2>
                    <span class="text-sm text-gray-500">当前阶段: <span id="currentStepText" class="text-green-600 font-semibold">模式选择</span></span>
                </div>
                <div class="bg-gray-200 rounded-full h-2 overflow-hidden">
                    <div id="overallProgress" class="bg-gradient-to-r from-green-500 to-emerald-500 h-full transition-all duration-500" style="width: 0%"></div>
                </div>
            </div>
            
            <!-- 步骤指示器 - 6个步骤 -->
            <div class="step-container">
                <div class="step-wrapper flex items-center justify-between relative px-8 py-4">
                    <!-- 连接线 -->
                    <div class="absolute left-0 right-0 top-1/2 transform -translate-y-1/2 flex px-16">
                        <div class="progress-line flex-1 mx-2" id="line0"></div>
                        <div class="progress-line flex-1 mx-2" id="line1"></div>
                        <div class="progress-line flex-1 mx-2" id="line2"></div>
                        <div class="progress-line flex-1 mx-2" id="line3"></div>
                        <div class="progress-line flex-1 mx-2" id="line4"></div>
                    </div>
                    
                    <!-- 步骤节点 -->
                    <div class="step-node active" data-step="0">
                        <i class="fas fa-compass step-icon text-xl"></i>
                    </div>
                    <div class="step-node" data-step="1">
                        <i class="fas fa-magic step-icon text-xl text-gray-400"></i>
                    </div>
                    <div class="step-node" data-step="2">
                        <i class="fas fa-brain step-icon text-xl text-gray-400"></i>
                    </div>
                    <div class="step-node" data-step="3">
                        <i class="fas fa-list-alt step-icon text-xl text-gray-400"></i>
                    </div>
                    <div class="step-node" data-step="4">
                        <i class="fas fa-book step-icon text-xl text-gray-400"></i>
                    </div>
                    <div class="step-node" data-step="5">
                        <i class="fas fa-film step-icon text-xl text-gray-400"></i>
                    </div>
                </div>
            </div>
            
            <!-- 步骤标签 -->
            <div class="flex justify-between px-6 mt-2 text-xs">
                <span class="text-sm font-medium text-green-600">模式选择</span>
                <span class="text-sm font-medium text-gray-400">创意输入</span>
                <span class="text-sm font-medium text-gray-400">脑洞生成</span>
                <span class="text-sm font-medium text-gray-400">大纲创作</span>
                <span class="text-sm font-medium text-gray-400">小说撰写</span>
                <span class="text-sm font-medium text-gray-400">脚本生成</span>
            </div>
        </div>

        <!-- 内容展示区 -->
        <div class="bg-white rounded-xl shadow-xl p-8">
            <!-- 步骤0: 模式选择 -->
            <div id="step0Content" class="content-panel active">
                <div class="mb-8">
                    <h3 class="text-2xl font-bold text-gray-800 mb-2">
                        <i class="fas fa-compass text-indigo-500 mr-2"></i>选择创作模式
                    </h3>
                    <p class="text-gray-600">选择适合你的创作方式，开启AI辅助创作之旅</p>
                </div>
                
                <!-- 模式选择卡片 -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                    <!-- 快速创作模式 -->
                    <div class="mode-card bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-8 shadow-lg" data-mode="quick">
                        <div class="flex items-start justify-between mb-4">
                            <div class="p-3 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl">
                                <i class="fas fa-bolt text-white text-2xl"></i>
                            </div>
                            <span class="tag bg-purple-100 text-purple-700">推荐</span>
                        </div>
                        <h4 class="text-xl font-bold text-gray-800 mb-3">灵感速写模式</h4>
                        <p class="text-gray-600 mb-4">AI随机生成创意灵感，一键开启创作流程，适合寻找灵感或快速体验</p>
                        <ul class="space-y-2 text-sm text-gray-600 mb-6">
                            <li><i class="fas fa-check text-green-500 mr-2"></i>随机生成5-10个创意脑洞</li>
                            <li><i class="fas fa-check text-green-500 mr-2"></i>智能匹配最佳创作路径</li>
                            <li><i class="fas fa-check text-green-500 mr-2"></i>全程自动化，5分钟完成</li>
                        </ul>
                        <button onclick="selectMode('quick')" class="w-full py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg font-semibold hover:shadow-lg transition-all">
                            <i class="fas fa-rocket mr-2"></i>开始快速创作
                        </button>
                    </div>
                    
                    <!-- 自定义模式 -->
                    <div class="mode-card bg-gradient-to-br from-blue-50 to-cyan-50 rounded-xl p-8 shadow-lg" data-mode="custom">
                        <div class="flex items-start justify-between mb-4">
                            <div class="p-3 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl">
                                <i class="fas fa-palette text-white text-2xl"></i>
                            </div>
                            <span class="tag bg-blue-100 text-blue-700">专业</span>
                        </div>
                        <h4 class="text-xl font-bold text-gray-800 mb-3">定制创作模式</h4>
                        <p class="text-gray-600 mb-4">输入你的创意想法，AI根据你的需求定制化生成，完全掌控创作方向</p>
                        <ul class="space-y-2 text-sm text-gray-600 mb-6">
                            <li><i class="fas fa-check text-green-500 mr-2"></i>自由输入创作需求</li>
                            <li><i class="fas fa-check text-green-500 mr-2"></i>细节参数可调整</li>
                            <li><i class="fas fa-check text-green-500 mr-2"></i>每步可编辑优化</li>
                        </ul>
                        <button onclick="selectMode('custom')" class="w-full py-3 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-lg font-semibold hover:shadow-lg transition-all">
                            <i class="fas fa-pen-fancy mr-2"></i>开始定制创作
                        </button>
                    </div>
                </div>
                
                <!-- 快速入口 -->
                <div class="border-t pt-6">
                    <p class="text-sm text-gray-500 mb-4">或者直接输入你的想法：</p>
                    <div class="flex gap-3">
                        <input 
                            type="text" 
                            id="quickInput" 
                            class="flex-1 px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-green-500 focus:ring-2 focus:ring-green-200 transition-all"
                            placeholder="例如：写一个关于时间旅行的悬疑故事..."
                        >
                        <button onclick="quickStart()" class="px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg font-semibold hover:shadow-lg transition-all">
                            <i class="fas fa-arrow-right mr-2"></i>直接开始
                        </button>
                    </div>
                </div>
            </div>

            <!-- 步骤1: 创意输入 -->
            <div id="step1Content" class="content-panel">
                <div class="mb-6">
                    <h3 class="text-2xl font-bold text-gray-800 mb-2">
                        <i class="fas fa-magic text-purple-500 mr-2"></i>
                        <span id="inputTitle">创意输入</span>
                    </h3>
                    <p class="text-gray-600" id="inputDesc">输入你的创意想法，或让AI为你随机生成</p>
                </div>
                
                <!-- 快速模式内容 -->
                <div id="quickModeContent" class="hidden">
                    <div class="text-center py-12 bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl">
                        <i class="fas fa-dice-d20 text-6xl text-purple-500 mb-4"></i>
                        <h4 class="text-xl font-semibold text-gray-800 mb-2">AI灵感生成器已就绪</h4>
                        <p class="text-gray-600 mb-6">点击下方按钮，AI将为你随机生成5个独特的创意脑洞</p>
                        <button onclick="generateRandomIdeas()" class="px-8 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg font-semibold hover:shadow-lg transition-all">
                            <i class="fas fa-wand-magic-sparkles mr-2"></i>生成创意灵感
                        </button>
                    </div>
                </div>
                
                <!-- 自定义模式内容 -->
                <div id="customModeContent" class="hidden">
                    <div class="bg-gray-50 rounded-xl p-6">
                        <div class="mb-4">
                            <label class="block text-sm font-semibold text-gray-700 mb-2">
                                <i class="fas fa-pen-fancy mr-1"></i>你的创意想法
                            </label>
                            <textarea 
                                id="userCreativeInput"
                                class="w-full p-4 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all resize-none" 
                                rows="4" 
                                placeholder="描述你想要的故事类型、主题、角色设定等...&#10;例如：一个关于时间旅行者的故事，主角每次回到过去都会失去一段记忆..."></textarea>
                        </div>
                        
                        <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 mb-4">
                            <div>
                                <label class="block text-xs font-medium text-gray-700 mb-1">故事类型</label>
                                <select class="w-full px-3 py-2 rounded-lg border border-gray-200 text-sm">
                                    <option>科幻</option>
                                    <option>奇幻</option>
                                    <option>悬疑</option>
                                    <option>言情</option>
                                    <option>历史</option>
                                    <option>冒险</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-xs font-medium text-gray-700 mb-1">故事基调</label>
                                <select class="w-full px-3 py-2 rounded-lg border border-gray-200 text-sm">
                                    <option>轻松欢快</option>
                                    <option>紧张刺激</option>
                                    <option>温馨感人</option>
                                    <option>黑暗深沉</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-xs font-medium text-gray-700 mb-1">篇幅长度</label>
                                <select class="w-full px-3 py-2 rounded-lg border border-gray-200 text-sm">
                                    <option>短篇(5千字)</option>
                                    <option selected>中篇(2万字)</option>
                                    <option>长篇(10万字)</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-xs font-medium text-gray-700 mb-1">目标读者</label>
                                <select class="w-full px-3 py-2 rounded-lg border border-gray-200 text-sm">
                                    <option>青少年</option>
                                    <option>成年人</option>
                                    <option>全年龄</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="flex items-center justify-between">
                            <div class="text-sm text-gray-500">
                                <i class="fas fa-keyboard mr-1"></i>已输入 <span id="inputCharCount">0</span> 字
                            </div>
                            <button onclick="processCustomInput()" class="px-6 py-2 bg-gradient-to-r from-blue-500 to-cyan-500 text-white rounded-lg font-semibold hover:shadow-lg transition-all">
                                <i class="fas fa-sparkles mr-2"></i>生成脑洞
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="flex justify-between mt-6">
                    <button onclick="prevStep()" class="bg-gray-200 text-gray-700 px-6 py-3 rounded-lg font-medium hover:bg-gray-300 transition-all">
                        <i class="fas fa-arrow-left mr-2"></i>返回选择
                    </button>
                    <button onclick="nextStep()" id="step1NextBtn" class="bg-gray-300 text-gray-500 px-8 py-3 rounded-lg font-medium cursor-not-allowed" disabled>
                        下一步: 脑洞展示 <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>

            <!-- 步骤2: 脑洞生成 -->
            <div id="step2Content" class="content-panel">
                <div class="mb-6">
                    <h3 class="text-2xl font-bold text-gray-800 mb-2">
                        <i class="fas fa-brain text-pink-500 mr-2"></i>
                        <span id="step2Title">创意脑洞</span>
                    </h3>
                    <p class="text-gray-600" id="step2Desc">AI正在生成创意脑洞...</p>
                </div>
                
                <!-- 加载状态 -->
                <div id="ideasLoading" class="hidden">
                    <div class="text-center py-16">
                        <div class="relative inline-block">
                            <div class="w-24 h-24 border-4 border-pink-200 rounded-full animate-pulse"></div>
                            <i class="fas fa-brain text-4xl text-pink-500 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"></i>
                        </div>
                        <div class="mt-6">
                            <div class="loading-dots mb-4">
                                <span></span>
                                <span></span>
                                <span></span>
                            </div>
                            <p class="text-lg font-medium text-gray-700" id="loadingText">AI正在激发创意灵感...</p>
                            <p class="text-sm text-gray-500 mt-2">预计需要 3-5 秒</p>
                        </div>
                        <div class="mt-8 max-w-md mx-auto">
                            <div class="bg-gray-100 rounded-full h-2 overflow-hidden">
                                <div class="bg-gradient-to-r from-pink-500 to-purple-500 h-full loading-progress" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 脑洞卡片展示 -->
                <div id="ideasGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6">
                    <!-- 动态生成 -->
                </div>
                
                <div class="flex justify-between">
                    <button onclick="prevStep()" class="bg-gray-200 text-gray-700 px-6 py-3 rounded-lg font-medium hover:bg-gray-300 transition-all">
                        <i class="fas fa-arrow-left mr-2"></i>返回
                    </button>
                    <button onclick="nextStep()" class="bg-gradient-to-r from-green-500 to-emerald-500 text-white px-8 py-3 rounded-lg font-medium hover:shadow-lg transition-all">
                        下一步: 生成大纲 <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>

            <!-- 步骤3: 大纲创作 -->
            <div id="step3Content" class="content-panel">
                <div class="mb-6">
                    <h3 class="text-2xl font-bold text-gray-800 mb-2">
                        <i class="fas fa-list-alt text-blue-500 mr-2"></i>故事大纲
                    </h3>
                    <p class="text-gray-600">基于选择的脑洞，AI正在生成详细的故事大纲...</p>
                </div>
                
                <div class="bg-gray-50 rounded-lg p-6">
                    <div class="flex items-center justify-center py-12">
                        <div class="text-center">
                            <div class="loading-dots mb-4">
                                <span></span>
                                <span></span>
                                <span></span>
                            </div>
                            <p class="text-gray-600">AI正在构思故事框架...</p>
                        </div>
                    </div>
                </div>
                
                <div class="flex justify-between mt-6">
                    <button onclick="prevStep()" class="bg-gray-200 text-gray-700 px-6 py-3 rounded-lg font-medium hover:bg-gray-300 transition-all">
                        <i class="fas fa-arrow-left mr-2"></i>返回
                    </button>
                    <button onclick="nextStep()" class="bg-gradient-to-r from-green-500 to-emerald-500 text-white px-8 py-3 rounded-lg font-medium hover:shadow-lg transition-all">
                        下一步: 撰写小说 <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>

            <!-- 步骤4: 小说撰写 -->
            <div id="step4Content" class="content-panel">
                <div class="mb-6">
                    <h3 class="text-2xl font-bold text-gray-800 mb-2">
                        <i class="fas fa-book text-purple-500 mr-2"></i>小说正文
                    </h3>
                    <p class="text-gray-600">AI正在创作完整的小说内容...</p>
                </div>
                
                <div class="bg-gray-50 rounded-lg p-6">
                    <div class="prose max-w-none">
                        <h4 class="text-xl font-semibold mb-4">第一章：序幕</h4>
                        <p class="text-gray-700 leading-relaxed mb-4">
                            故事内容加载中...
                        </p>
                    </div>
                </div>
                
                <div class="flex justify-between mt-6">
                    <button onclick="prevStep()" class="bg-gray-200 text-gray-700 px-6 py-3 rounded-lg font-medium hover:bg-gray-300 transition-all">
                        <i class="fas fa-arrow-left mr-2"></i>返回
                    </button>
                    <button onclick="nextStep()" class="bg-gradient-to-r from-green-500 to-emerald-500 text-white px-8 py-3 rounded-lg font-medium hover:shadow-lg transition-all">
                        下一步: 生成脚本 <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>

            <!-- 步骤5: 脚本生成 -->
            <div id="step5Content" class="content-panel">
                <div class="mb-6">
                    <h3 class="text-2xl font-bold text-gray-800 mb-2">
                        <i class="fas fa-film text-orange-500 mr-2"></i>互动脚本
                    </h3>
                    <p class="text-gray-600">将小说转换为可视化的互动脚本...</p>
                </div>
                
                <div class="bg-gray-50 rounded-lg p-6">
                    <div class="space-y-4">
                        <p class="text-center text-gray-600">脚本生成中...</p>
                    </div>
                </div>
                
                <div class="flex justify-between mt-6">
                    <button onclick="prevStep()" class="bg-gray-200 text-gray-700 px-6 py-3 rounded-lg font-medium hover:bg-gray-300 transition-all">
                        <i class="fas fa-arrow-left mr-2"></i>返回
                    </button>
                    <button class="bg-gradient-to-r from-purple-500 to-pink-500 text-white px-8 py-3 rounded-lg font-medium hover:shadow-lg transition-all">
                        <i class="fas fa-download mr-2"></i>下载完整作品
                    </button>
                </div>
            </div>
        </div>
    </main>

    <script>
        // 当前步骤和模式
        let currentStep = 0;
        let currentMode = null;
        const totalSteps = 6;
        
        // 步骤信息
        const stepInfo = {
            0: { name: '模式选择', icon: 'compass', color: 'indigo' },
            1: { name: '创意输入', icon: 'magic', color: 'purple' },
            2: { name: '脑洞生成', icon: 'brain', color: 'pink' },
            3: { name: '大纲创作', icon: 'list-alt', color: 'blue' },
            4: { name: '小说撰写', icon: 'book', color: 'purple' },
            5: { name: '脚本生成', icon: 'film', color: 'orange' }
        };
        
        // 模拟的脑洞数据
        const quickIdeas = [
            { title: "量子纠缠的爱情", type: "科幻", content: "在量子计算机普及的未来，两个程序员发现他们的意识在量子层面产生了纠缠..." },
            { title: "时间图书馆", type: "奇幻", content: "一个神秘的图书馆，每本书都连接着不同的时间线..." },
            { title: "AI侦探社", type: "悬疑", content: "第一家由AI运营的侦探社开业了，他们通过分析大数据来破案..." },
            { title: "梦境交易所", type: "奇幻", content: "在这里，人们可以买卖彼此的梦境，直到有人发现了操控现实的方法..." },
            { title: "最后的手写信", type: "温情", content: "在数字化的未来，一封手写信引发了一场跨越时空的寻找..." }
        ];
        
        // 选择模式
        function selectMode(mode) {
            currentMode = mode;
            document.querySelectorAll('.mode-card').forEach(card => {
                card.classList.remove('selected');
            });
            document.querySelector(`[data-mode="${mode}"]`).classList.add('selected');
            
            setTimeout(() => {
                currentStep = 1;
                updateUI();
                
                // 根据模式显示不同内容
                if (mode === 'quick') {
                    document.getElementById('quickModeContent').classList.remove('hidden');
                    document.getElementById('customModeContent').classList.add('hidden');
                    document.getElementById('inputTitle').textContent = '快速生成';
                    document.getElementById('inputDesc').textContent = 'AI将为你随机生成创意灵感';
                } else {
                    document.getElementById('customModeContent').classList.remove('hidden');
                    document.getElementById('quickModeContent').classList.add('hidden');
                    document.getElementById('inputTitle').textContent = '定制创作';
                    document.getElementById('inputDesc').textContent = '输入你的创意想法，AI将基于此生成脑洞';
                }
            }, 300);
        }
        
        // 生成随机灵感（快速模式）
        function generateRandomIdeas() {
            // 启用下一步按钮
            const nextBtn = document.getElementById('step1NextBtn');
            nextBtn.disabled = false;
            nextBtn.classList.remove('bg-gray-300', 'text-gray-500', 'cursor-not-allowed');
            nextBtn.classList.add('bg-gradient-to-r', 'from-green-500', 'to-emerald-500', 'text-white', 'hover:shadow-lg');
            
            // 显示成功提示
            const quickContent = document.getElementById('quickModeContent');
            quickContent.innerHTML = `
                <div class="text-center py-12 bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl">
                    <i class="fas fa-check-circle text-6xl text-green-500 mb-4"></i>
                    <h4 class="text-xl font-semibold text-gray-800 mb-2">创意灵感已生成！</h4>
                    <p class="text-gray-600">AI已为你准备了5个精彩的创意脑洞，点击下一步查看</p>
                </div>
            `;
        }
        
        // 处理自定义输入
        function processCustomInput() {
            const input = document.getElementById('userCreativeInput').value.trim();
            if (!input) {
                alert('请输入你的创意想法');
                return;
            }
            
            // 启用下一步按钮
            const nextBtn = document.getElementById('step1NextBtn');
            nextBtn.disabled = false;
            nextBtn.classList.remove('bg-gray-300', 'text-gray-500', 'cursor-not-allowed');
            nextBtn.classList.add('bg-gradient-to-r', 'from-green-500', 'to-emerald-500', 'text-white', 'hover:shadow-lg');
            
            // 显示处理中状态
            const customContent = document.getElementById('customModeContent');
            customContent.innerHTML = `
                <div class="text-center py-12 bg-gradient-to-br from-blue-50 to-cyan-50 rounded-xl">
                    <div class="loading-dots mb-4">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                    <h4 class="text-xl font-semibold text-gray-800 mb-2">AI正在理解你的创意...</h4>
                    <p class="text-gray-600">基于你的想法生成相关脑洞中</p>
                </div>
            `;
            
            // 模拟延迟后显示完成
            setTimeout(() => {
                customContent.innerHTML = `
                    <div class="text-center py-12 bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl">
                        <i class="fas fa-check-circle text-6xl text-green-500 mb-4"></i>
                        <h4 class="text-xl font-semibold text-gray-800 mb-2">脑洞已生成！</h4>
                        <p class="text-gray-600">基于你的创意，AI生成了5个相关的故事脑洞</p>
                    </div>
                `;
            }, 2000);
        }
        
        // 快速开始
        function quickStart() {
            const input = document.getElementById('quickInput').value.trim();
            if (input) {
                currentMode = 'custom';
                currentStep = 1;
                updateUI();
                document.getElementById('customInputArea').classList.remove('hidden');
                document.getElementById('customIdea').value = input;
                generateCustomInterface();
            } else {
                alert('请输入你的创意想法');
            }
        }
        
        // 生成快速创意脑洞
        function generateQuickIdeas() {
            const container = document.getElementById('ideasGrid');
            container.innerHTML = '';
            
            quickIdeas.forEach((idea, index) => {
                const card = document.createElement('div');
                card.className = 'idea-card bg-white rounded-lg shadow-md p-6';
                card.innerHTML = `
                    <div class="flex justify-between items-start mb-3">
                        <h4 class="text-lg font-semibold text-gray-800">${idea.title}</h4>
                        <span class="tag bg-${getTypeColor(idea.type)}-100 text-${getTypeColor(idea.type)}-600">${idea.type}</span>
                    </div>
                    <p class="text-gray-600 text-sm mb-4">${idea.content}</p>
                    <div class="flex items-center justify-between">
                        <span class="text-xs text-gray-500">匹配度: ${85 + index * 3}%</span>
                        <i class="fas fa-circle text-gray-300 text-xl select-icon"></i>
                    </div>
                `;
                
                card.addEventListener('click', function() {
                    selectIdeaCard(this);
                });
                
                container.appendChild(card);
            });
        }
        
        // 生成自定义界面
        function generateCustomInterface() {
            const container = document.getElementById('ideasGrid');
            container.innerHTML = `
                <div class="col-span-full text-center py-8">
                    <div class="loading-dots mb-4">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                    <p class="text-gray-600">根据你的需求生成创意中...</p>
                </div>
            `;
            
            // 模拟延迟后生成
            setTimeout(() => {
                generateQuickIdeas();
            }, 2000);
        }
        
        // 获取类型颜色
        function getTypeColor(type) {
            const colors = {
                '科幻': 'blue',
                '奇幻': 'purple',
                '悬疑': 'gray',
                '温情': 'pink'
            };
            return colors[type] || 'green';
        }
        
        // 选择脑洞卡片
        function selectIdeaCard(card) {
            document.querySelectorAll('.idea-card').forEach(c => {
                c.classList.remove('selected');
                const icon = c.querySelector('.select-icon');
                if (icon) {
                    icon.classList.replace('fa-check-circle', 'fa-circle');
                    icon.classList.replace('text-green-500', 'text-gray-300');
                }
            });
            
            card.classList.add('selected');
            const icon = card.querySelector('.select-icon');
            if (icon) {
                icon.classList.replace('fa-circle', 'fa-check-circle');
                icon.classList.replace('text-gray-300', 'text-green-500');
            }
        }
        
        // 切换到下一步
        function nextStep() {
            if (currentStep < totalSteps - 1) {
                currentStep++;
                updateUI();
                
                // 如果进入步骤2（脑洞生成），显示加载动画
                if (currentStep === 2) {
                    showIdeasLoading();
                }
            }
        }
        
        // 显示脑洞加载动画
        function showIdeasLoading() {
            const loadingDiv = document.getElementById('ideasLoading');
            const gridDiv = document.getElementById('ideasGrid');
            
            loadingDiv.classList.remove('hidden');
            gridDiv.innerHTML = '';
            
            // 根据模式设置不同的加载文案
            const loadingTexts = currentMode === 'quick' 
                ? ['正在激发创意火花...', '构思独特的故事世界...', '打磨创意细节...']
                : ['正在解析你的创意...', '生成相关故事概念...', '优化创意方向...'];
            
            let textIndex = 0;
            const textInterval = setInterval(() => {
                if (textIndex < loadingTexts.length) {
                    document.getElementById('loadingText').textContent = loadingTexts[textIndex];
                    textIndex++;
                }
            }, 1000);
            
            // 3秒后显示脑洞卡片
            setTimeout(() => {
                clearInterval(textInterval);
                loadingDiv.classList.add('hidden');
                document.getElementById('step2Title').textContent = '选择创意脑洞';
                document.getElementById('step2Desc').textContent = '选择一个你喜欢的创意方向，AI将基于此创作完整的小说';
                generateIdeaCards();
            }, 3000);
        }
        
        // 生成脑洞卡片
        function generateIdeaCards() {
            const container = document.getElementById('ideasGrid');
            container.innerHTML = '';
            
            quickIdeas.forEach((idea, index) => {
                const card = document.createElement('div');
                card.className = 'idea-card bg-white rounded-lg shadow-md p-6 opacity-0';
                card.style.animation = `fadeIn 0.5s ease ${index * 0.1}s forwards`;
                card.innerHTML = `
                    <div class="flex justify-between items-start mb-3">
                        <h4 class="text-lg font-semibold text-gray-800">${idea.title}</h4>
                        <span class="tag bg-${getTypeColor(idea.type)}-100 text-${getTypeColor(idea.type)}-600">${idea.type}</span>
                    </div>
                    <p class="text-gray-600 text-sm mb-4">${idea.content}</p>
                    <div class="flex items-center justify-between">
                        <span class="text-xs text-gray-500">匹配度: ${85 + index * 3}%</span>
                        <i class="fas fa-circle text-gray-300 text-xl select-icon"></i>
                    </div>
                `;
                
                card.addEventListener('click', function() {
                    selectIdeaCard(this);
                });
                
                container.appendChild(card);
            });
        }
        
        // 返回上一步
        function prevStep() {
            if (currentStep > 0) {
                currentStep--;
                updateUI();
            }
        }
        
        // 更新界面
        function updateUI() {
            // 更新进度条
            const progress = (currentStep / (totalSteps - 1)) * 100;
            document.getElementById('overallProgress').style.width = progress + '%';
            
            // 更新当前步骤文本
            document.getElementById('currentStepText').textContent = stepInfo[currentStep].name;
            
            // 更新步骤节点状态
            document.querySelectorAll('.step-node').forEach((node, index) => {
                node.classList.remove('active', 'completed');
                
                if (index < currentStep) {
                    node.classList.add('completed');
                    node.querySelector('.step-icon').classList.remove('text-gray-400');
                } else if (index === currentStep) {
                    node.classList.add('active');
                    node.querySelector('.step-icon').classList.remove('text-gray-400');
                } else {
                    node.querySelector('.step-icon').classList.add('text-gray-400');
                }
            });
            
            // 更新连接线状态
            document.querySelectorAll('.progress-line').forEach((line, index) => {
                line.classList.remove('active', 'completed');
                if (index < currentStep) {
                    line.classList.add('completed');
                } else if (index === currentStep) {
                    line.classList.add('active');
                }
            });
            
            // 更新步骤标签颜色
            const stepLabels = document.querySelectorAll('.flex.justify-between.px-8.mt-2 span');
            stepLabels.forEach((label, index) => {
                label.classList.remove('text-green-600', 'text-gray-400');
                if (index <= currentStep) {
                    label.classList.add('text-green-600');
                } else {
                    label.classList.add('text-gray-400');
                }
            });
            
            // 切换内容面板
            document.querySelectorAll('.content-panel').forEach(panel => {
                panel.classList.remove('active');
            });
            
            setTimeout(() => {
                document.getElementById(`step${currentStep}Content`).classList.add('active');
            }, 100);
        }
        
        // 点击步骤节点跳转
        document.querySelectorAll('.step-node').forEach(node => {
            node.addEventListener('click', function() {
                const step = parseInt(this.dataset.step);
                if (step <= currentStep || step === currentStep + 1) {
                    currentStep = step;
                    updateUI();
                }
            });
        });
        
        // 字数统计功能
        const userInput = document.getElementById('userCreativeInput');
        if (userInput) {
            userInput.addEventListener('input', function() {
                document.getElementById('inputCharCount').textContent = this.value.length;
            });
        }
        
        // 添加fadeIn动画
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeIn {
                from { opacity: 0; transform: translateY(10px); }
                to { opacity: 1; transform: translateY(0); }
            }
        `;
        document.head.appendChild(style);
        
        // 初始化
        updateUI();
    </script>
</body>
</html>